# 程序结构和执行

## 信息是 位 + 上下文

context 决定一段bit 是什么东西（int? float? string? isa?）

## 程序翻译流程

.c -> .i -> .s -> .o -> exe

## 系统硬件组成

总线：通常总线被设计成传送定长的字节块，也就是字（word）；字中的字节数（即字长）是一个基本的系统参数，各个系统中都不尽相同

1/O（输入/输出）设备:系统与外部世界的联系通道

主存：memory DRAM

CPU： register, ALU

    指令集架构描述的是每条机器代码指令的效果；而微体系结构描述的是处理器实际上是如何实现的

DMA

高速缓存 cache

## Amdahl定律

当我们对系统的某个部分加速时，其对系统整体性能的影响取决于该部分的重要性和加速程度

系统执行某应用程序需要时间为T_old

系统某部分所需执行时间与该时间的比例为a，而运部分性能提升比例为k即该部分初始所需时间为a*T_old

现在所需时间为a*T_old / k

总的执行时间应为 T_new = (1-a)T_old + a*T_old / k = T_old((1-a) + a/k);

## 并发(concurrency)  并行（parallelism）

并发:一个处理器同时处理多个任务

并行：多个/多核处理器同时处理多个任务

线程级并发

指令集并行

SIMD: 单指令多数据

## 虚拟内存

计算机将零碎的内存 认为是一段连续的内存进行管理，同时还可以将一部分内存数据放在外部存储器中进行交换。

# 信息的表示和处理

## 信息存储

8bit = 1byte

十六进制 0XFFFF

字长 word w 与系统有关： 虚拟地址范围 0 ~ 2^w -1

大端小端序： 大端最高有效字节存放在低位；小端最高有效字节存放在低位

# 程序的机器级表示

ISA

## 过程

p164

过程是软件中一种很重要的抽象,提供了一种封装代码的方式.

转移控制 
```
call Lable 
call  .Operand
ret
```
## 数组分配和访问

p176

对于数据类型T和整型常数N,声明如下:

T A[N] 起始位置表示为 xA

它在内存中分配一个 L*N 字节的连续区域

L是数据类型:T的大小（单位为字节）

引人了标识符A,可以用A来作为指向数组开头的指针，这个指针的值就是xA

可以用0〜N-1的整数索引来访问该数组元素。数组元素i会被存放在地址为xA+L*i的地方

**GEP指令** 

### 变长数组



## 异质的数据结构

p183

struct and union

内存对齐

## 在机器级程序中将控制与数据结合起来

p192

### 指针

void* 代表通用指针

函数指针 
```
int fun(int x, int *p);
int (*fp)(int, int*);
fp = fun;
```

### 变长栈帧



## 浮点代码

p204

# 处理器体系结构

p243

## 流水线

p282

# 优化程序性能

341

## 循环 及 并行

p366

## 内存性能

p382

# 存储器层次结构

p399

## 局部性

p418

# 链接

p464

# 虚拟内存

p559